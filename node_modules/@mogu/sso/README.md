# KOA中间件之蘑菇街SSO登录

## 使用方法

1.	package.json添加依赖

		"@mogu/sso": "^1.0.0"

3.	sso中间件包括两个检测接口

	- 页面路由中间件`sso.viewCheck`
	- API路由中间件`sso.apiCheck`

4. 页面路由`sso.viewCheck`使用

	页面中间件若判断未登录，会自动跳转至登录页面。


  	```
  	// 在koa-router中
  	router.get('/*', sso.viewCheck, function *() {...});
  	```
  	```
  	// 若在raindrop项目中使用，可以直接在初始化的时候设置
  	const router = RaindropServer.server().init({  
    	...
      viewMiddlewares: [sso.viewCheck]
  	});
	  ```
5. API路由`sso.apiCheck`使用

	**API中间件若判断未登录，不会自动跳转至登录登录界面，需手动处理；
	使用该接口，需要cookie信息。**


	```
	// 在koa-router中
	router.get('/data/apps', sso.apiCheck, function *() {...});
	```
	```
	在RainDrop中使用时，写到路由配置文件中
	routerMap = {
		get: {
			'/data/apps': [[sso.apiCheck], function *() {...}]
		}
	}
	```
